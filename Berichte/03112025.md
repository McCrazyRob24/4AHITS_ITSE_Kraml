# Arbeitsbericht
## Datum: 08.11.2025
## Klasse: 4AHITS
## Name: Samael Kraml

# Übung: Host-Erkennung mit `nmap`

**Kurzbeschreibung:**
Mit `nmap` kann ich in einem Subnetz feststellen, welche Hosts aktiv sind, ohne Ports zu scannen. Das ist besonders nützlich, um sich vor einem detaillierten Scan einen schnellen Überblick über erreichbare Systeme zu verschaffen.

---

## Ziel

Die Host-Erkennung dient dazu, alle eingeschalteten oder antwortenden Geräte in einem Netzwerkbereich zu identifizieren. So kann ich prüfen, welche Systeme aktuell aktiv sind oder auf Netzwerkprobes reagieren.

---

## Befehl

Zur Erkennung aktiver Hosts verwende ich:

```bash
sudo nmap -sn 192.168.5.0/24
```

**Erläuterung:**

* `-sn` (früher `-sP`) führt ausschließlich die Host-Erkennung durch, ohne Ports zu prüfen.
* Mit `sudo` kann `nmap` ARP-Scans und andere privilegierte Methoden verwenden, was im LAN in der Regel bessere Ergebnisse liefert.

---

## Funktionsweise

* Im lokalen Netzwerk nutzt `nmap` vorrangig ARP-Anfragen. Antwortet ein Gerät, wird es als „up“ eingestuft.
* Ohne Root-Rechte oder außerhalb des lokalen Netzes greift `nmap` auf ICMP-, TCP- oder UDP-Probes zurück, um Hosts zu erkennen.

---

## Hinweise

* **Nicht immer zuverlässig:** Manche Geräte blockieren ICMP- oder TCP-Anfragen, wodurch sie fälschlicherweise als „down“ erscheinen können.
* **Rechtliches:** Scans sollten nur in Netzwerken durchgeführt werden, für die ich eine Erlaubnis habe.
* **Empfehlung:** In einer Labor- oder Testumgebung ist `sudo nmap -sn <netz>` eine einfache und effektive Möglichkeit, aktive Geräte zu erfassen.

---

# Übung: Port Probing

## Ziel

* Bestätigung eines SSH-Dienstes auf Port **22**.
* Ermittlung der Webserver-Bezeichnung und -Version auf Port **80** mit `telnet`, `nc` und `curl`.

---

## SSH-Server (telnet)

**Kommando:**

```bash
telnet 192.168.6.51 22
```

**Ausgabe:**

```text
┌──(kali㉿kali)-[~]
└─$ telnet 192.168.6.51 22
Trying 192.168.6.51...
Connected to 192.168.6.51.
Escape character is '^]'.
SSH-2.0-OpenSSH_4.7p1 Debian-8ubuntu1

Protocol mismatch.
Connection closed by foreign host.
```

**Ergebnis / Interpretation:**

* Port **22** ist offen; das Banner liefert `SSH-2.0-OpenSSH_4.7p1 Debian-8ubuntu1`.
* `Protocol mismatch` entspricht dem Verhalten, da `telnet` kein SSH-Handshake durchführt; die Bannerzeile reicht zur Versionsbestimmung.

---

## Web-Server — Telnet

**Kommando:**

```bash
telnet 192.168.6.51 80
# in der Telnet-Sitzung:
GET / HTTP/1.1
Host: 192.168.6.51

```

**Ausgabe:**

```text
┌──(kali㉿kali)-[~]
└─$ telnet 192.168.6.51 80
Trying 192.168.6.51...
Connected to 192.168.6.51.
Escape character is '^]'.


GET / HTTP/1.1
Host: 192.168.6.51

HTTP/1.1 400 Bad Request
Date: Mon, 13 Oct 2025 11:38:35 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
Content-Length: 390
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
Request header field is missing ':' separator.<br />
<pre>
^
</pre>
</p>
<hr>
<address>Apache/2.2.8 (Ubuntu) DAV/2 Server at metasploitable.localdomain Port 80</address>
</body></html>
Connection closed by foreign host.
```

**Ergebnis / Interpretation:**

* Der Server nennt sich `Apache/2.2.8 (Ubuntu) DAV/2` in der `Server:`-Headerzeile.
* Der `400 Bad Request` rührt vermutlich von fehlenden CRLF-Zeilenenden bei manueller Eingabe; trotzdem ist die `Server`-Information lesbar.

---

## Web-Server — netcat (nc)

**Kommando:**

```bash
nc 192.168.6.51 80 <<EOF
GET / HTTP/1.1
Host: 192.168.6.51
Connection: close

EOF
```

**Ausgabe:**

```text
┌──(kali㉿kali)-[~]
└─$ nc 192.168.6.51 80 <<EOF
heredoc> GET / HTTP/1.1
heredoc> Host: 192.168.6.51
heredoc> Connection: close
heredoc>
heredoc>
heredoc> EOF
HTTP/1.1 200 OK
Date: Mon, 13 Oct 2025 11:44:59 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
X-Powered-By: PHP/5.2.4-2ubuntu5.10
Connection: close
Transfer-Encoding: chunked
Content-Type: text/html

37b
<html><head><title>Metasploitable2 - Linux</title></head><body>
<pre>

                _                  _       _ _        _     _      ____  
_ __ ___   ___| |_ __ _ ___ _ __ | | ___ (_) |_ __ _| |__ | | ___|___ \
| '_ ` _ \ / _ \ __/ _` / __| '_ \| |/ _ \| | __/ _` | '_ \| |/ _ \ __) |
| | | | | |  __/ || (_| \__ \ |_) | | (_) | | || (_| | |_) | |  __// __/
|_| |_| |_|\___|\__\__,_|___/ .__/|_|\___/|_|\__\__,_|_.__/|_|\___|_____|
                            |_|                                          


Warning: Never expose this VM to an untrusted network!

Contact: msfdev[at]metasploit.com

Login with msfadmin/msfadmin to get started


</pre>
<ul>
<li><a href="/twiki/">TWiki</a></li>
<li><a href="/phpMyAdmin/">phpMyAdmin</a></li>
<li><a href="/mutillidae/">Mutillidae</a></li>
<li><a href="/dvwa/">DVWA</a></li>
<li><a href="/dav/">WebDAV</a></li>
</ul>
</body>
</html>


0
```

**Ergebnis / Interpretation:**

* `HTTP/1.1 200 OK` — erfolgreiche Antwort.
* `Server: Apache/2.2.8 (Ubuntu) DAV/2` und `X-Powered-By: PHP/5.2.4-2ubuntu5.10` bestätigen die Webserver- und PHP-Version.
* HTML-Inhalt entspricht der Metasploitable2-Startseite.

---

## Web-Server — curl

**Kommando:**

```bash
curl -I http://192.168.6.51/
```

**Ausgabe:**

```text
┌──(kali㉿kali)-[~]
└─$ curl -I http://192.168.6.51/
HTTP/1.1 200 OK
Date: Mon, 13 Oct 2025 11:51:29 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
X-Powered-By: PHP/5.2.4-2ubuntu5.10
Content-Type: text/html
```

**Ergebnis / Interpretation:**

* `curl` bestätigt kompakt `Server: Apache/2.2.8 (Ubuntu) DAV/2` und `X-Powered-By: PHP/5.2.4-2ubuntu5.10`.

---

## Zusammenfassung der Befunde

* **SSH:** Port 22 offen — Banner: `SSH-2.0-OpenSSH_4.7p1 Debian-8ubuntu1`.
* **Webserver:** `Apache/2.2.8 (Ubuntu) DAV/2`.
* **PHP:** `PHP/5.2.4-2ubuntu5.10` (sichtbar über `X-Powered-By`).

---

## Cheat Sheet — Kurzreferenz für Port Probing (telnet / nc / curl)

### telnet

* Zweck: Interaktive TCP-Verbindung; schnell für Banner-Grabbing.
* Syntax: `telnet <host> <port>`
* Hinweise: Manuelle Eingabe von Requests möglich; auf korrekte Zeilenenden achten.

### nc (netcat)

* Zweck: Skript- und here-doc-freundliches Tool für TCP/UDP.
* Syntax: `nc <host> <port>` oder mit here-doc:

```bash
nc <host> <port> <<EOF
GET / HTTP/1.1
Host: <host>
Connection: close

EOF
```

* Hinweise: `
  ` (CRLF) für HTTP-Zeilenenden verwenden; `Connection: close` hilft, komplette Antworten zu erhalten.

### curl

* Zweck: HTTP(S)-Client, ideal für Header-/Body-Abfragen.
* Syntax: `curl -I http://<host>/` (nur Header) oder `curl -v http://<host>/` (verbose).
* Hinweise: Sehr zuverlässig für schnelle Header-Ausgaben.

---

# Übung: Netcat Port-Scan (Ports 1–30)

**Kurzbeschreibung:**
Mit `nc` (netcat) habe ich geprüft, welche TCP‑Ports im Bereich **1–30** auf der Metasploitable‑VM (`192.168.6.51`) offen sind. Das folgende Protokoll enthält das eingesetzte Kommando, die originale Konsolenausgabe (1:1) und eine kurze Interpretation — im Stil des vorhandenen Berichts.

---

## Ziel

* Ermitteln, welche Ports 1–30 auf `192.168.6.51` offen sind.
* Gefundene Ports den üblichen Diensten zuordnen und die Befunde dokumentieren.

---

## Netcat-Scan

**Kommando:**

```bash
nc -zv -w 1 192.168.6.51 1-30
```

**Konsolenausgabe (Original):**

```text
┌──(kali㉿kali)-[~]
└─$ nc -zv -w 1 192.168.6.51 1-30
192.168.6.51: inverse host lookup failed: Host name lookup failure
(UNKNOWN) [192.168.6.51] 25 (smtp) open
(UNKNOWN) [192.168.6.51] 23 (telnet) open
(UNKNOWN) [192.168.6.51] 22 (ssh) open
(UNKNOWN) [192.168.6.51] 21 (ftp) open
```

**Ergebnis / Interpretation:**

* Gefundene offene Ports im Bereich 1–30:

  * **21/tcp** — FTP
  * **22/tcp** — SSH
  * **23/tcp** — Telnet
  * **25/tcp** — SMTP
* Die Meldung `inverse host lookup failed` bedeutet lediglich, dass kein Reverse‑DNS‑Eintrag vorliegt und beeinflusst das Scan‑Ergebnis nicht.
* Offene Ports bedeuten, dass auf diesen Ports Dienste lauschen. Für Versionsangaben und genauere Informationen empfehle ich anschließendes Banner‑Grabbing oder `nmap -sV` — in der vorliegenden Laborumgebung passen die Ergebnisse zu den zuvor dokumentierten Diensten (SSH/FTP/Web/Telnet).

---
