# Arbeitsbericht
## Datum: 08.11.2025
## Klasse: 4AHITS
## Name: Samael Kraml

---

# Übung: Host-Erkennung mit `nmap`

**Kurzbeschreibung:**
Mit `nmap` kann ich in einem Subnetz feststellen, welche Hosts aktiv sind, ohne Ports zu scannen. Das ist besonders nützlich, um sich vor einem detaillierten Scan einen schnellen Überblick über erreichbare Systeme zu verschaffen.

---

## Ziel

Die Host-Erkennung dient dazu, alle eingeschalteten oder antwortenden Geräte in einem Netzwerkbereich zu identifizieren. So kann ich prüfen, welche Systeme aktuell aktiv sind oder auf Netzwerkprobes reagieren.

---

## Befehl

Zur Erkennung aktiver Hosts verwende ich:

```bash
sudo nmap -sn 192.168.5.0/24
```

**Erläuterung:**

* `-sn` (früher `-sP`) führt ausschließlich die Host-Erkennung durch, ohne Ports zu prüfen.
* Mit `sudo` kann `nmap` ARP-Scans und andere privilegierte Methoden verwenden, was im LAN in der Regel bessere Ergebnisse liefert.

---

## Funktionsweise

* Im lokalen Netzwerk nutzt `nmap` vorrangig ARP-Anfragen. Antwortet ein Gerät, wird es als „up“ eingestuft.
* Ohne Root-Rechte oder außerhalb des lokalen Netzes greift `nmap` auf ICMP-, TCP- oder UDP-Probes zurück, um Hosts zu erkennen.

---

## Hinweise

* **Nicht immer zuverlässig:** Manche Geräte blockieren ICMP- oder TCP-Anfragen, wodurch sie fälschlicherweise als „down“ erscheinen können.
* **Rechtliches:** Scans sollten nur in Netzwerken durchgeführt werden, für die ich eine Erlaubnis habe.
* **Empfehlung:** In einer Labor- oder Testumgebung ist `sudo nmap -sn <netz>` eine einfache und effektive Möglichkeit, aktive Geräte zu erfassen.

---

# Übung: Port Probing

## Ziel

* Bestätigung eines SSH-Dienstes auf Port **22**.
* Ermittlung der Webserver-Bezeichnung und -Version auf Port **80** mit `telnet`, `nc` und `curl`.

---

## SSH-Server (telnet)

**Kommando:**

```bash
telnet 192.168.6.51 22
```

**Ausgabe:**

```text
┌──(kali㉿kali)-[~]
└─$ telnet 192.168.6.51 22
Trying 192.168.6.51...
Connected to 192.168.6.51.
Escape character is '^]'.
SSH-2.0-OpenSSH_4.7p1 Debian-8ubuntu1

Protocol mismatch.
Connection closed by foreign host.
```

**Ergebnis / Interpretation:**

* Port **22** ist offen; das Banner liefert `SSH-2.0-OpenSSH_4.7p1 Debian-8ubuntu1`.
* `Protocol mismatch` entspricht dem Verhalten, da `telnet` kein SSH-Handshake durchführt; die Bannerzeile reicht zur Versionsbestimmung.

---

## Web-Server — Telnet

**Kommando:**

```bash
telnet 192.168.6.51 80
# in der Telnet-Sitzung:
GET / HTTP/1.1
Host: 192.168.6.51

```

**Ausgabe:**

```text
┌──(kali㉿kali)-[~]
└─$ telnet 192.168.6.51 80
Trying 192.168.6.51...
Connected to 192.168.6.51.
Escape character is '^]'.


GET / HTTP/1.1
Host: 192.168.6.51

HTTP/1.1 400 Bad Request
Date: Mon, 13 Oct 2025 11:38:35 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
Content-Length: 390
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
Request header field is missing ':' separator.<br />
<pre>
^
</pre>
</p>
<hr>
<address>Apache/2.2.8 (Ubuntu) DAV/2 Server at metasploitable.localdomain Port 80</address>
</body></html>
Connection closed by foreign host.
```

**Ergebnis / Interpretation:**

* Der Server nennt sich `Apache/2.2.8 (Ubuntu) DAV/2` in der `Server:`-Headerzeile.
* Der `400 Bad Request` rührt vermutlich von fehlenden CRLF-Zeilenenden bei manueller Eingabe; trotzdem ist die `Server`-Information lesbar.

---

## Web-Server — netcat (nc)

**Kommando:**

```bash
nc 192.168.6.51 80 <<EOF
GET / HTTP/1.1
Host: 192.168.6.51
Connection: close

EOF
```

**Ausgabe:**

```text
┌──(kali㉿kali)-[~]
└─$ nc 192.168.6.51 80 <<EOF
heredoc> GET / HTTP/1.1
heredoc> Host: 192.168.6.51
heredoc> Connection: close
heredoc>
heredoc>
heredoc> EOF
HTTP/1.1 200 OK
Date: Mon, 13 Oct 2025 11:44:59 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
X-Powered-By: PHP/5.2.4-2ubuntu5.10
Connection: close
Transfer-Encoding: chunked
Content-Type: text/html

37b
<html><head><title>Metasploitable2 - Linux</title></head><body>
<pre>

                _                  _       _ _        _     _      ____  
_ __ ___   ___| |_ __ _ ___ _ __ | | ___ (_) |_ __ _| |__ | | ___|___ \
| '_ ` _ \ / _ \ __/ _` / __| '_ \| |/ _ \| | __/ _` | '_ \| |/ _ \ __) |
| | | | | |  __/ || (_| \__ \ |_) | | (_) | | || (_| | |_) | |  __// __/
|_| |_| |_|\___|\__\__,_|___/ .__/|_|\___/|_|\__\__,_|_.__/|_|\___|_____|
                            |_|                                          


Warning: Never expose this VM to an untrusted network!

Contact: msfdev[at]metasploit.com

Login with msfadmin/msfadmin to get started


</pre>
<ul>
<li><a href="/twiki/">TWiki</a></li>
<li><a href="/phpMyAdmin/">phpMyAdmin</a></li>
<li><a href="/mutillidae/">Mutillidae</a></li>
<li><a href="/dvwa/">DVWA</a></li>
<li><a href="/dav/">WebDAV</a></li>
</ul>
</body>
</html>


0
```

**Ergebnis / Interpretation:**

* `HTTP/1.1 200 OK` — erfolgreiche Antwort.
* `Server: Apache/2.2.8 (Ubuntu) DAV/2` und `X-Powered-By: PHP/5.2.4-2ubuntu5.10` bestätigen die Webserver- und PHP-Version.
* HTML-Inhalt entspricht der Metasploitable2-Startseite.

---

## Web-Server — curl

**Kommando:**

```bash
curl -I http://192.168.6.51/
```

**Ausgabe:**

```text
┌──(kali㉿kali)-[~]
└─$ curl -I http://192.168.6.51/
HTTP/1.1 200 OK
Date: Mon, 13 Oct 2025 11:51:29 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
X-Powered-By: PHP/5.2.4-2ubuntu5.10
Content-Type: text/html
```

**Ergebnis / Interpretation:**

* `curl` bestätigt kompakt `Server: Apache/2.2.8 (Ubuntu) DAV/2` und `X-Powered-By: PHP/5.2.4-2ubuntu5.10`.

---

## Zusammenfassung der Befunde

* **SSH:** Port 22 offen — Banner: `SSH-2.0-OpenSSH_4.7p1 Debian-8ubuntu1`.
* **Webserver:** `Apache/2.2.8 (Ubuntu) DAV/2`.
* **PHP:** `PHP/5.2.4-2ubuntu5.10` (sichtbar über `X-Powered-By`).

---

## Cheat Sheet — Kurzreferenz für Port Probing (telnet / nc / curl)

### telnet

* Zweck: Interaktive TCP-Verbindung; schnell für Banner-Grabbing.
* Syntax: `telnet <host> <port>`
* Hinweise: Manuelle Eingabe von Requests möglich; auf korrekte Zeilenenden achten.

### nc (netcat)

* Zweck: Skript- und here-doc-freundliches Tool für TCP/UDP.
* Syntax: `nc <host> <port>` oder mit here-doc:

```bash
nc <host> <port> <<EOF
GET / HTTP/1.1
Host: <host>
Connection: close

EOF
```

* Hinweise: `
  ` (CRLF) für HTTP-Zeilenenden verwenden; `Connection: close` hilft, komplette Antworten zu erhalten.

### curl

* Zweck: HTTP(S)-Client, ideal für Header-/Body-Abfragen.
* Syntax: `curl -I http://<host>/` (nur Header) oder `curl -v http://<host>/` (verbose).
* Hinweise: Sehr zuverlässig für schnelle Header-Ausgaben.

---

# Übung: Netcat Port-Scan (Ports 1–30)

**Kurzbeschreibung:**
Mit `nc` (netcat) habe ich geprüft, welche TCP‑Ports im Bereich **1–30** auf der Metasploitable‑VM (`192.168.6.51`) offen sind. Das folgende Protokoll enthält das eingesetzte Kommando, die originale Konsolenausgabe (1:1) und eine kurze Interpretation — im Stil des vorhandenen Berichts.

---

## Ziel

* Ermitteln, welche Ports 1–30 auf `192.168.6.51` offen sind.
* Gefundene Ports den üblichen Diensten zuordnen und die Befunde dokumentieren.

---

## Netcat-Scan

**Kommando:**

```bash
nc -zv -w 1 192.168.6.51 1-30
```

**Konsolenausgabe (Original):**

```text
┌──(kali㉿kali)-[~]
└─$ nc -zv -w 1 192.168.6.51 1-30
192.168.6.51: inverse host lookup failed: Host name lookup failure
(UNKNOWN) [192.168.6.51] 25 (smtp) open
(UNKNOWN) [192.168.6.51] 23 (telnet) open
(UNKNOWN) [192.168.6.51] 22 (ssh) open
(UNKNOWN) [192.168.6.51] 21 (ftp) open
```

**Ergebnis / Interpretation:**

* Gefundene offene Ports im Bereich 1–30:

  * **21/tcp** — FTP
  * **22/tcp** — SSH
  * **23/tcp** — Telnet
  * **25/tcp** — SMTP
* Die Meldung `inverse host lookup failed` bedeutet lediglich, dass kein Reverse‑DNS‑Eintrag vorliegt und beeinflusst das Scan‑Ergebnis nicht.
* Offene Ports bedeuten, dass auf diesen Ports Dienste lauschen. Für Versionsangaben und genauere Informationen empfehle ich anschließendes Banner‑Grabbing oder `nmap -sV` — in der vorliegenden Laborumgebung passen die Ergebnisse zu den zuvor dokumentierten Diensten (SSH/FTP/Web/Telnet).

---

# Übung: Port-Scan mit nmap

### Ziel  
In dieser Übung wurde ein Port-Scan auf der Metasploitable VM durchgeführt, um offene Ports und die dazugehörigen Dienste zu identifizieren. Zusätzlich wurden verschiedene Optionen von nmap verwendet, um die Scans zu verfeinern und weitere Informationen zu sammeln.

### Befehl(e) mit nmap  
Hier eine kurze Übersicht der verwendeten nmap-Befehle, die auf der Metasploitable VM ausgeführt wurden:

#### 1. **Standard-Port-Scan**  
Befehl:
```bash
sudo nmap 192.168.6.51
```

Dieser Befehl scannt die am häufigsten verwendeten 1000 Ports auf der angegebenen IP-Adresse und zeigt die offenen Ports und deren zugehörige Dienste an.  
**Ergebnis (Auszug):**
- Ports: 21 (FTP), 22 (SSH), 23 (Telnet), 80 (HTTP), 3306 (MySQL), u.a.  
- Alle Ports sind "open", was bedeutet, dass die Dienste auf diesen Ports erreichbar sind.

#### 2. **Scannen aller möglichen Ports (1-65535)**  
Befehl:
```bash
sudo nmap -p1-65535 192.168.6.51
```

Dieser Scan überprüft alle 65535 TCP-Ports des Hosts und liefert eine vollständige Liste aller offenen Ports.  
**Ergebnis (Auszug):**
- Es wurden zusätzliche Ports wie 3632 (distccd) und 8787 (msgsrvr) gefunden.  
- Der Scan dauerte 21.23 Sekunden (länger als der Standard-Scan mit nur 1000 Ports).

#### 3. **Überspringen des Host-Discovery (Ping-Scan)**  
Befehl:
```bash
sudo nmap -Pn 192.168.6.51
```

Dieser Befehl überspringt den Host-Discovery-Scan, d.h., es wird nicht überprüft, ob der Host tatsächlich erreichbar ist, sondern nmap versucht direkt, alle Ports zu scannen. Diese Option ist nützlich, wenn Hosts durch Firewalls oder Netzwerksicherheitsvorrichtungen vor Ping-Anfragen geschützt sind.  
**Ergebnis (Auszug):**
- Ergebnisse waren identisch mit dem Standard-Scan, aber ohne den Host-Discovery-Test.

#### 4. **Service/Version Detection**  
Befehl:
```bash
sudo nmap -sV 192.168.6.51
```

Hiermit wird nmap angewiesen, die Versionen der Dienste zu erkennen, die auf den offenen Ports laufen. Dies ist besonders nützlich, um potenzielle Schwachstellen in veralteten Versionen zu identifizieren.  
**Ergebnis (Auszug):**
- FTP: vsftpd 2.3.4  
- SSH: OpenSSH 4.7p1  
- HTTP: Apache 2.2.8  
- MySQL: Version unbekannt, aber erkannt als MySQL-Dienst.

#### 5. **OS Erkennung**  
Befehl:
```bash
sudo nmap -O 192.168.6.51
```

Dieser Befehl versucht, das Betriebssystem des Zielhosts zu ermitteln.  
**Ergebnis:**
- Das Ziel wurde als **Linux 2.6.x** erkannt.

#### 6. **Aggressiver Scan**  
Befehl:
```bash
sudo nmap -A 192.168.6.51
```

Der aggressive Scan kombiniert mehrere nmap-Optionen: Service- und Versionserkennung, OS-Erkennung, Script-Scan und mehr. Dies liefert viele detaillierte Informationen über den Zielhost.  
**Ergebnis:**
- FTP: vsftpd 2.3.4, SSH: OpenSSH 4.7p1, Samba: smbd 3.X - 4.X  
- Weitere Informationen über Dienste und Sicherheitslücken wurden durch die Option `-A` geliefert.

#### 7. **Timing/Speed-Optionen**  
Befehl:
```bash
sudo nmap -T4 192.168.6.51
```

Die `-T4` Option erhöht die Scan-Geschwindigkeit, indem sie die Anzahl der gleichzeitig durchgeführten Verbindungen erhöht. Dies beschleunigt den Scan, aber könnte die Wahrscheinlichkeit erhöhen, dass er erkannt wird.  
**Ergebnis:**
- Der Scan dauerte nur 13.41 Sekunden, was eine erhebliche Zeitersparnis im Vergleich zu langsameren Scans (z. B. `-T0`) darstellt.

#### 8. **Ausgabe in Datei speichern**  
Befehl:
```bash
sudo nmap -oN scan.txt 192.168.6.51
```

Mit dieser Option wird die Ausgabe des Scans in eine Datei (z.B. `scan.txt`) gespeichert, um die Ergebnisse später zu analysieren oder zu vergleichen.  
**Ergebnis:**
- Der Scan wurde erfolgreich durchgeführt und die Ergebnisse wurden in der Datei gespeichert.

#### 9. **`--reason`-Option**  
Befehl:
```bash
sudo nmap --reason 192.168.6.51
```

Die `--reason`-Option zeigt, warum ein bestimmter Port als "offen" markiert wurde (z. B. wegen eines SYN-ACK-Pakets). Dies ist besonders hilfreich, um zu verstehen, wie nmap zu seinen Ergebnissen gekommen ist.  
**Ergebnis:**
- Alle Ports wurden als "open" mit dem Grund `syn-ack ttl 64` markiert.

#### 10. **Scannen der Top 100 häufigsten Ports**  
Befehl:
```bash
sudo nmap --top-ports 100 192.168.6.51
```

Diese Option scannt nur die 100 häufigsten Ports. Das spart Zeit und liefert trotzdem wertvolle Informationen, wenn nur die wichtigsten Ports relevant sind.  
**Ergebnis:**
- Die wichtigsten Dienste wie FTP, SSH, HTTP, MySQL wurden ebenfalls gefunden, aber der Scan dauerte nur 13.28 Sekunden.

---

### Weitere Scans auf verschiedene Systeme:

#### 1. **Kali Linux**  
Befehl:
```bash
sudo nmap --top-ports 100 192.168.5.52
```

**Ergebnis:**
- Nur Port 22 (SSH) war offen. Dies deutet darauf hin, dass der Kali-Host sicherer konfiguriert ist und keine unnötigen Dienste laufen.

#### 2. **Windows System**  
Befehl:
```bash
sudo nmap --top-ports 100 192.168.5.50
```

**Ergebnis:**
- Alle 100 Ports waren gefiltert, was darauf hindeutet, dass eine Firewall aktiv ist, die den nmap-Scan blockiert.

#### 3. **Default Gateway**  
Befehl:
```bash
sudo nmap --top-ports 100 192.168.6.254
```

**Ergebnis:**
- Nur Port 23 (Telnet) war offen, was darauf hinweist, dass der Router in diesem Netz nur sehr wenige offene Dienste hat.

---

### Was kann alles mit einem Port-Scan herausgefunden werden?

Durch die Durchführung des Port-Scans konnte eine Vielzahl an Informationen gewonnen werden, die für die Sicherheitsanalyse von Netzwerken und Systemen von Bedeutung sind:

1. **Offene Dienste**: Welche Dienste (z. B. FTP, HTTP, SSH) auf welchen Ports verfügbar sind.  
2. **Versionen der Dienste**: Die genaue Version von Software wie z. B. Apache oder MySQL kann helfen, bekannte Sicherheitslücken zu identifizieren.  
3. **Betriebssystem**: Die Erkennung des Betriebssystems (Linux 2.6.x in diesem Fall) ist hilfreich, um bekannte Schwachstellen und Angriffsmöglichkeiten für das System zu bestimmen.  
4. **Firewall/Filtern**: Erkennen von gefilterten Ports, was auf aktive Firewalls hinweist.  
5. **Sicherheitslücken**: Offene, veraltete oder unsichere Versionen von Diensten (z. B. vsftpd 2.3.4, eine Version mit einer bekannten Sicherheitslücke) können potenziellen Angreifern helfen, Schwachstellen auszunutzen.

---
